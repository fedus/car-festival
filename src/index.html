<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Autofestival - Luxembourg 2021</title>
        <meta name="description" content="The Autofestival 2021 in Luxembourg is your yearly opportunity to do your part and take society back into the past, one SUV at a time.">
        <meta name="keywords" content="car, festival, auto, autofestival, autosfestival, luxembourg, garage, voiture, pkw, solden, garagist, petrol, gas, oil, tanken, acl, suv, cabrio, van, minivan">
        <meta name="robots" content="index, follow">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">

        <link rel="stylesheet" href="css/normalize.min.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Fira+Sans+Condensed:wght@300&family=Permanent+Marker&display=swap" rel="stylesheet"> 

        <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.0/dist/alpine.min.js" defer></script>

    </head>
    <body class="flex-container" x-data="carFestival()">
        <div class="excuse-top">I need a new car because ...</div>
        <div class="excuse-bottom" x-show="!showGuessButton" x-text="currentExcuse"></div>
        <div class="generate-button-container" x-show="showGuessButton">
            <button type="button" class="generate-button" x-on:click="guess">Generate excuse</button>
        </div>
    </body>
    <script>
        function sizeViewport() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }

        sizeViewport();

        window.addEventListener('resize', () => {
            sizeViewport();
        });

        function carFestival() {
            return {
                showGuessButton: true,
                guess() {
                    this.startRandomExcuseGenerator();
                    this.showGuessButton = false;
                },
                excusePrefix: '...',
                excuses: [
                    "I'm insecure",
                    'I have too much money',
                    'I have a child',
                    'I have a pet',
                    'my neighbour got one too',
                    "I'm vain",
                    'I never think about alternatives',
                    "I'm unfit",
                    'I like big oil',
                    "I'm bored",
                    "I don't care",
                    "I think people on buses smell",
                    "I like the smell of gas",
                    "it is my god-given right",
                    "I like the smell of my car dealership",
                    "I want to be able to drive my partner to the hospital in the extremely unlikely case of an emergency",
                    "only poor people take public transport",
                    "I don't like Francois Bausch's tram",
                    "my dad owned a car, so I own a car",
                    "I don't care about society",
                    "I have given up on being a valuable member to society",
                ],
                currentExcuse: '',
                generatorMaxMs: 150,
                maxGeneratorSteps: 15,
                currentGeneratorStep: 0,
                getRandomExcuse() {
                    this.currentExcuse = `${this.excusePrefix} ${this.excuses[Math.floor(Math.random() * this.excuses.length)]}`;
                },
                startRandomExcuseGenerator() {
                    this.currentGeneratorStep = 1;
                    setTimeout(this.randomExcuseGeneratorStep.bind(this), this.generatorMaxMs/(this.maxGeneratorSteps/this.currentGeneratorStep));
                    this.getRandomExcuse();
                },
                randomExcuseGeneratorStep() {
                    if (this.currentGeneratorStep < this.maxGeneratorSteps) {
                        this.currentGeneratorStep++;
                        setTimeout(this.randomExcuseGeneratorStep.bind(this), this.generatorMaxMs/(this.maxGeneratorSteps/this.currentGeneratorStep))
                    }
                    this.getRandomExcuse();
                },
            };
        }
    </script>
</html>
